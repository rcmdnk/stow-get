os:
  - linux
  - osx
language: ruby
before_install:
  - export INST_DIR="$HOME/usr/local"
  - export PATH="$INST_DIR/bin:$PATH"
  - export LD_LIBRARY_PATH="$INST_DIR/lib64:$INST_DIR/lib:$LD_LIBRARY_PATH"
install:
  - echo "packages=(autoconf)" > ~/.stow-get
  - mkdir conf_dir
  - echo "packages=(wdiff)" > ./conf_file
  - echo "isnt_type=gnu" > ./conf_dir/wdiff.sh
script:
  - ./bin/stow-get help
  - ./bin/stow-get version
  - ./bin/stow-get install -V
  #- travis_wait 30 ./bin/stow-get install $(ls share/stow-get/*sh|cut -d"/" -f3|sed "s/.sh$//")
  #- rm -rf ~/usr && travis_wait 30 ./bin/stow-get install autoconf
  - rm -rf ~/usr && travis_wait 30 ./bin/stow-get install automake
  - rm -rf ~/usr && travis_wait 30 ./bin/stow-get install bzip2
  - rm -rf ~/usr && travis_wait 30 ./bin/stow-get install curl
  - rm -rf ~/usr && travis_wait 30 ./bin/stow-get install expat
  - rm -rf ~/usr && travis_wait 30 ./bin/stow-get install gettext
  - rm -rf ~/usr && travis_wait 30 ./bin/stow-get install git
  - rm -rf ~/usr && travis_wait 30 ./bin/stow-get install glib
  - rm -rf ~/usr && travis_wait 30 ./bin/stow-get install libevent
  - rm -rf ~/usr && travis_wait 30 ./bin/stow-get install libffi
  - rm -rf ~/usr && travis_wait 30 ./bin/stow-get install libtool
  - rm -rf ~/usr && travis_wait 30 ./bin/stow-get install lua
  - rm -rf ~/usr && travis_wait 30 ./bin/stow-get install m4
  - rm -rf ~/usr && travis_wait 30 ./bin/stow-get install mercurial
  - rm -rf ~/usr && travis_wait 30 ./bin/stow-get install m.sh
  - rm -rf ~/usr && travis_wait 30 ./bin/stow-get install ncurses
  - rm -rf ~/usr && travis_wait 30 ./bin/stow-get install openssl
  - rm -rf ~/usr && travis_wait 30 ./bin/stow-get install pkg-config
  - rm -rf ~/usr && travis_wait 30 ./bin/stow-get install protobuf
  - rm -rf ~/usr && travis_wait 30 ./bin/stow-get install python
  - rm -rf ~/usr && travis_wait 30 ./bin/stow-get install readline
  - rm -rf ~/usr && travis_wait 30 ./bin/stow-get install rubygems
  - rm -rf ~/usr && travis_wait 30 ./bin/stow-get install screen
  - rm -rf ~/usr && travis_wait 30 ./bin/stow-get install sl
  - rm -rf ~/usr && travis_wait 30 ./bin/stow-get install stow-get
  - rm -rf ~/usr && travis_wait 30 ./bin/stow-get install stow
  - rm -rf ~/usr && travis_wait 30 ./bin/stow-get install termcap
  - rm -rf ~/usr && travis_wait 30 ./bin/stow-get install texinfo
  - rm -rf ~/usr && travis_wait 30 ./bin/stow-get install tmux
  - rm -rf ~/usr && travis_wait 30 ./bin/stow-get install unzip
  - rm -rf ~/usr && travis_wait 30 ./bin/stow-get install vim
  - rm -rf ~/usr && travis_wait 30 ./bin/stow-get install wget
  - ls "$INST_DIR/stow"
  - ls "$INST_DIR/stow/current"
  - ./bin/stow-get uninstall screen
  - ls "$INST_DIR/stow"
  - ls "$INST_DIR/stow/current"
  - ./bin/stow-get list
  - ./bin/stow-get packages
  - ./bin/stow-get info screen
  - ./bin/stow-get latest wget
  - ./bin/stow-get latest openssl
  - ./bin/stow-get install -t gnu wget
  - ./bin/stow-get install -c ./conf_file -d ./conf_dir
  - echo "target_postfix=test" >> share/stow-get/autoconf.sh
  - ./bin/stow-get install autoconf
  - ls "$INST_DIR/stow"
  - ./bin/stow-get cleanup
  - ls "$INST_DIR/stow"
  - ls "$INST_DIR/stow/current"

